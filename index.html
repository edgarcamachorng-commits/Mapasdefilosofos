<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gran Atlas de la Filosofía Europea</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #f5f5f5; color: #333; line-height: 1.6; }
        .container { display: flex; flex-direction: column; height: 100vh; }
        header { background-color: #2c3e50; color: white; padding: 1rem 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); z-index: 10; }
        .content { display: flex; flex: 1; overflow: hidden; }
        #map { flex: 2; z-index: 1; }
        .sidebar { flex: 1; background-color: white; padding: 1.5rem; overflow-y: auto; box-shadow: -3px 0 10px rgba(0, 0, 0, 0.1); max-width: 500px; min-width: 380px; }
        .philosopher-info { display: none; }
        .philosopher-info.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .philosopher-header { background-color: #ecf0f1; padding: 1.2rem; border-radius: 8px; margin-bottom: 1.5rem; border-left: 5px solid #3498db; }
        .philosopher-name { font-size: 1.6rem; color: #2c3e50; margin-bottom: 0.3rem; line-height: 1.2; }
        .philosopher-era { color: #7f8c8d; font-style: italic; font-size: 0.95rem; margin-bottom: 0.5rem; }
        .tag { display: inline-block; background-color: #95a5a6; color: white; padding: 0.2rem 0.6rem; border-radius: 3px; font-size: 0.8rem; margin-right: 5px; }
        .info-section { margin-bottom: 1.5rem; }
        .info-title { color: #3498db; border-bottom: 2px solid #eef2f3; padding-bottom: 0.4rem; margin-bottom: 0.8rem; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; }
        .works-list { padding-left: 1.3rem; }
        .works-list li { margin-bottom: 0.6rem; font-size: 0.95rem; }
        .region-filter { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.5rem; padding: 10px; background: #f8f9fa; border-radius: 8px; }
        .region-btn { padding: 0.4rem 0.8rem; background-color: white; border: 1px solid #ddd; border-radius: 20px; cursor: pointer; transition: 0.3s; font-size: 0.8rem; }
        .region-btn:hover, .region-btn.active { background-color: #3498db; color: white; border-color: #3498db; }
        .counter { background-color: #2c3e50; color: white; padding: 0.1rem 0.5rem; border-radius: 10px; font-size: 0.75rem; margin-left: 4px; }
        #search { width: 100%; padding: 0.8rem; border: 2px solid #eee; border-radius: 8px; margin-bottom: 1rem; font-size: 1rem; transition: 0.3s; }
        #search:focus { border-color: #3498db; outline: none; }
        .legend { margin-top: 2rem; border-top: 1px solid #eee; padding-top: 1rem; }
        .legend-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.6rem; font-size: 0.8rem; }
        .legend-item { display: flex; align-items: center; }
        .color-box { width: 14px; height: 14px; border-radius: 3px; margin-right: 8px; }
        @media (max-width: 992px) { .content { flex-direction: column; } .sidebar { max-height: 45vh; max-width: 100%; width: 100%; } #map { height: 55vh; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-atlas"></i> Gran Atlas de la Filosofía Europea</h1>
            <p>Exploración íntegra de <span id="total-count">0</span> pensadores desde la Antigüedad al Siglo XX</p>
        </header>
        <div class="content">
            <div id="map"></div>
            <div class="sidebar">
                <input type="text" id="search" placeholder="Buscar filósofo, obra o concepto...">
                <div class="region-filter" id="filter-bar">
                    <button class="region-btn active" onclick="filterData('all', this)">Todos <span class="counter" id="cnt-all">0</span></button>
                </div>
                <div id="details-panel">
                    <div class="philosopher-info active">
                        <div class="philosopher-header">
                            <h2 class="philosopher-name">Seleccione un autor</h2>
                            <p class="philosopher-era">Explore el mapa o utilice el buscador para ver la información completa.</p>
                        </div>
                    </div>
                </div>
                <div class="legend">
                    <h3 class="info-title">Regiones y Escuelas</h3>
                    <div class="legend-grid" id="legend-box"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Fusión íntegra de datos de ambas fuentes
        const rawData = [
            // Fuente: filosofos.json (IDs 1-85)
            { id: "j1", name: "Averroes (ibn Rushd)", region: "espana", regionName: "España (Al-Ándalus)", subcategory: "Edad Media (Edad de Oro del Islam)", era: "1126 - 1198", area: "Filosofía y teología islámica, aristotelismo", concepts: "Relación entre fe y razón, la eternidad del mundo, el intelecto agente", works: ["Comentarios a Aristóteles", "La destrucción de la destrucción (Tahafut al-Tahafut)", "Discurso decisivo (Faṣl al-Maqāl)"], location: [37.8882, -4.7794], city: "Córdoba", color: "#3498db" },
            { id: "j2", name: "Domingo de Soto", region: "espana", regionName: "España", subcategory: "Escolástica Renacentista (Siglo XVI)", era: "1494 - 1560", area: "Filosofía natural, lógica y derecho (Escuela de Salamanca)", concepts: "Movimiento de caída libre, teoría de la guerra justa, ius gentium", works: ["Deliberación sobre la causa de los pobres", "Comentario a la Física de Aristóteles", "De iustitia et iure"], location: [40.9429, -4.1088], city: "Segovia", color: "#3498db" },
            { id: "j3", name: "Juan Luis Vives", region: "espana", regionName: "España", subcategory: "Siglo de Oro (Renacimiento)", era: "1493 - 1540", area: "Humanismo renacentista, filosofía moral y pedagógica", concepts: "Crítica a la escolástica, filosofía práctica, pionero de la psicología empírica", works: ["De anima et vita (1538)", "De disciplinis (1531)", "De subventione pauperum (1526)"], location: [39.4699, -0.3763], city: "Valencia", color: "#3498db" },
            { id: "j4", name: "Francisco Suárez", region: "espana", regionName: "España", subcategory: "Siglo de Oro (Barroco)", era: "1548 - 1617", area: "Metafísica y filosofía del derecho (Escuela de Salamanca)", concepts: "Ius gentium, soberanía popular indirecta, ens inquantum ens", works: ["Disputaciones metafísicas (1597)", "De legibus (1612)"], location: [37.1773, -3.5986], city: "Granada", color: "#3498db" },
            { id: "j5", name: "José Ortega y Gasset", region: "espana", regionName: "España", subcategory: "Siglo XX", era: "1883 - 1955", area: "Raciovitalismo y razón histórica", concepts: "'Yo soy yo y mi circunstancia', la vida como realidad radical, razón vital", works: ["El tema de nuestro tiempo", "¿Qué es filosofía?", "La rebelión de las masas"], location: [40.4168, -3.7038], city: "Madrid", color: "#3498db" },
            { id: "j6", name: "María Zambrano", region: "espana", regionName: "España", subcategory: "Siglo XX", era: "1904 - 1991", area: "Filosofía poética y razón poética", concepts: "La razón 'piadosa', acogida de lo sagrado y simbólico", works: ["Claros del bosque", "La tumba de Antígona", "Hacia un saber sobre el alma"], location: [36.7783, -4.1008], city: "Vélez-Málaga", color: "#3498db" },
            { id: "j7", name: "Luís de Molina", region: "portugal", regionName: "Portugal", subcategory: "Renacimiento", era: "1535 - 1600", area: "Filosofía moral, teología y derecho", concepts: "Teoría del scientia media (ciencia media), teoría del precio justo", works: ["Concordia liberi arbitrii cum gratiae donis", "De iustitia et iure"], location: [38.5720, -7.9070], city: "Évora", color: "#2ecc71" },
            { id: "j8", name: "Lucio Anneo Séneca", region: "italia", regionName: "Italia (Imperio Romano)", subcategory: "Imperio Romano", era: "4 a.C. - 65 d.C.", area: "Estoicismo Romano (ética)", concepts: "Providencia, virtus como único bien, control de las pasiones", works: ["Cartas a Lucilio", "Sobre la ira (De Ira)", "Cuestiones Naturales"], location: [37.8882, -4.7794], city: "Córdoba (Nacimiento) / Roma", color: "#f39c12" },
            { id: "j9", name: "Pedro de Juan Olivi", region: "italia", regionName: "Italia / Francia", subcategory: "Medieval (Siglo XIII)", era: "1248 - 1298", area: "Teología y filosofía franciscana (Escolástica)", concepts: "Teoría del usus pauper (uso pobre), intencionalidad y atención (aspectus)", works: ["Cuestiones sobre la perfección evangélica", "Comentario a las Sentencias"], location: [43.342, 3.216], city: "Serignan / Umbría", color: "#f39c12" },
            { id: "j10", name: "Giovanni Pico della Mirandola", region: "italia", regionName: "Italia", subcategory: "Renacimiento (Siglo XV)", era: "1463 - 1494", area: "Humanismo renacentista, sincretismo filosófico", concepts: "Dignidad del hombre, libertad creativa, concordia entre tradiciones", works: ["Discurso sobre la dignidad del hombre", "900 tesis (Conclusiones philosophicae)"], location: [44.887, 11.066], city: "Mirandola", color: "#f39c12" },
            { id: "j11", name: "Giambattista Vico", region: "italia", regionName: "Italia", subcategory: "Ilustración (Setecento)", era: "1668 - 1744", area: "Filosofía de la historia y jurisprudencia", concepts: "Ley del corso e ricorso, ciencia nueva basada en mitos", works: ["Principios de una Ciencia Nueva (1725)"], location: [40.8518, 14.2681], city: "Nápoles", color: "#f39c12" },
            { id: "j12", name: "Antonio Rosmini Serbati", region: "italia", regionName: "Italia", subcategory: "Siglo XIX", era: "1797 - 1855", area: "Filosofía del derecho y epistemología", concepts: "El ser como objeto fundamental de la mente, sentimiento fundamental", works: ["Nuevo ensayo sobre el origen de las ideas", "Filosofía del derecho"], location: [45.8909, 11.042], city: "Rovereto", color: "#f39c12" },
            { id: "j13", name: "Galvano della Volpe", region: "italia", regionName: "Italia", subcategory: "Siglo XX", era: "1895 - 1968", area: "Estética marxista y crítica de la ideología", concepts: "Crítica del gusto materialista, estructuras lingüísticas e ideológicas", works: ["Crítica del gusto (1960)", "Rousseau y Marx (1957)"], location: [44.353, 11.714], city: "Imola", color: "#f39c12" },
            { id: "j14", name: "Pedro Abelardo", region: "francia", regionName: "Francia", subcategory: "Medieval (Siglo XII)", era: "1079 - 1142", area: "Lógica, teología y ética", concepts: "Ética de la intención moral, conceptualismo, método dialéctico", works: ["Sic et Non", "Ética o Conócete a ti mismo", "Historia de mis desventuras"], location: [47.133, -1.333], city: "Le Pallet (Bretaña)", color: "#9b59b6" },
            { id: "j15", name: "Pierre Gassendi", region: "francia", regionName: "Francia", subcategory: "Barroco / Siglo XVII", era: "1592 - 1655", area: "Filosofía natural y atomismo", concepts: "Atomismo epicúreo cristiano, empirismo, crítica a Descartes", works: ["Ejercicios paradójicos contra los aristotélicos", "Syntagma Philosophicum"], location: [44.067, 6.233], city: "Champtercier", color: "#9b59b6" },
            { id: "j16", name: "Condillac", region: "francia", regionName: "Francia", subcategory: "Ilustración", era: "1714 - 1780", area: "Teoría del conocimiento, sensualismo", concepts: "Empirismo radical, la estatua hipotética, sensaciones transformadas", works: ["Tratado de las sensaciones", "Ensayo sobre el origen de los conocimientos humanos"], location: [45.188, 5.724], city: "Grenoble", color: "#9b59b6" },
            { id: "j17", name: "Auguste Comte", region: "francia", regionName: "Francia", subcategory: "Siglo XIX (Positivismo)", era: "1798 - 1857", area: "Filosofía de la ciencia y sociología", concepts: "Ley de los tres estados, clasificación de las ciencias, religión de la Humanidad", works: ["Curso de filosofía positiva", "Sistema de política positiva"], location: [43.610, 3.876], city: "Montpellier", color: "#9b59b6" },
            { id: "j18", name: "Emmanuel Levinas", region: "francia", regionName: "Francia", subcategory: "Siglo XX (Fenomenología)", era: "1906 - 1995", area: "Ética y fenomenología", concepts: "Ética como filosofía primera, el rostro del Otro, responsabilidad infinita", works: ["Totalidad e Infinito", "De otro modo que ser"], location: [48.8566, 2.3522], city: "Kaunas (Nacimiento) / París", color: "#9b59b6" },
            { id: "j19", name: "Gaston Bachelard", region: "francia", regionName: "Francia", subcategory: "Siglo XX (Epistemología)", era: "1884 - 1962", area: "Epistemología histórica e imaginación", concepts: "Ruptura epistemológica, obstáculos epistemológicos, psicoanálisis del fuego", works: ["La formación del espíritu científico", "El agua y los sueños"], location: [48.232, 4.708], city: "Bar-sur-Aube", color: "#9b59b6" },
            { id: "j20", name: "Charles Bonnet", region: "suiza", regionName: "Suiza", subcategory: "Ilustración", era: "1720 - 1793", area: "Filosofía natural y biología teórica", concepts: "Preformacionismo, evolución biológica, relación materia-conciencia", works: ["Contemplación de la naturaleza", "Ensayo analítico sobre las facultades del alma"], location: [46.204, 6.143], city: "Ginebra", color: "#1abc9c" },
            { id: "j21", name: "Jeanne Hersch", region: "suiza", regionName: "Suiza", subcategory: "Siglo XX", era: "1910 - 2000", area: "Filosofía de la libertad y la existencia", concepts: "Libertad humana como núcleo existencial, defensa de los derechos humanos", works: ["El ser y la forma", "El derecho de ser un hombre"], location: [46.204, 6.143], city: "Ginebra", color: "#1abc9c" },
            { id: "j22", name: "Jacob Burckhardt", region: "suiza", regionName: "Suiza", subcategory: "Siglo XIX (Historia)", era: "1818 - 1897", area: "Filosofía de la historia y la cultura", concepts: "Historia como estudio de la cultura, análisis del Renacimiento", works: ["La cultura del Renacimiento en Italia", "Reflexiones sobre la historia universal"], location: [47.559, 7.588], city: "Basilea", color: "#1abc9c" },
            { id: "j23", name: "Jean Piaget", region: "suiza", regionName: "Suiza", subcategory: "Siglo XX (Epistemología)", era: "1896 - 1980", area: "Epistemología genética y psicología", concepts: "Estadios del desarrollo cognitivo, asimilación y acomodación", works: ["La representación del mundo en el niño", "Biología y conocimiento"], location: [46.991, 6.931], city: "Neuchâtel", color: "#1abc9c" },
            { id: "j24", name: "Adolphe Quetelet", region: "belgica", regionName: "Bélgica", subcategory: "Siglo XIX", era: "1796 - 1874", area: "Filosofía de la estadística y sociología", concepts: "Concepto del 'hombre medio', estadística aplicada a fenómenos sociales", works: ["Sur l'homme et le développement de ses facultés"], location: [51.054, 3.717], city: "Gante", color: "#e67e22" },
            { id: "j25", name: "Alphonse De Waelhens", region: "belgica", regionName: "Bélgica", subcategory: "Siglo XX (Fenomenología)", era: "1911 - 1981", area: "Fenomenología y filosofía de la psiquiatría", concepts: "Introducción de Heidegger y Merleau-Ponty, estudio sobre la esquizofrenia", works: ["La filosofía de Martin Heidegger", "La schizophrénie"], location: [51.054, 3.717], city: "Gante", color: "#e67e22" },
            { id: "j26", name: "Anna Maria van Schurman", region: "paises_bajos", regionName: "Países Bajos", subcategory: "Siglo XVII", era: "1607 - 1678", area: "Humanismo cristiano, feminismo filosófico", concepts: "Derecho de las mujeres a la educación, igualdad espiritual", works: ["Disertación sobre la aptitud de la mente de la mujer"], location: [52.090, 5.121], city: "Utrecht", color: "#34495e" },
            { id: "j27", name: "Hugo Grocio", region: "paises_bajos", regionName: "Países Bajos", subcategory: "Siglo XVII (Derecho)", era: "1583 - 1645", area: "Filosofía del derecho natural e internacional", concepts: "Derecho natural secularizado (etsi Deus non daretur), Mare Liberum", works: ["De iure belli ac pacis", "Mare Liberum"], location: [52.011, 4.357], city: "Delft", color: "#34495e" },
            { id: "j28", name: "J. H. van den Berg", region: "paises_bajos", regionName: "Países Bajos", subcategory: "Siglo XX (Fenomenología)", era: "1914 - 2012", area: "Fenomenología médica e histórica", concepts: "Metabletica (historia de las situaciones), fenomenología del cuerpo", works: ["La fenomenología de la situación", "Cosas cambiadas"], location: [52.110, 5.181], city: "De Bilt", color: "#34495e" },
            { id: "j29", name: "Moses Mendelssohn", region: "alemania", regionName: "Alemania", subcategory: "Ilustración (Aufklärung)", era: "1729 - 1786", area: "Filosofía de la religión y estética", concepts: "Haskalá (Ilustración judía), inmortalidad del alma, separación Iglesia-Estado", works: ["Jerusalén", "Fedón"], location: [51.838, 12.245], city: "Dessau", color: "#d35400" },
            { id: "j30", name: "Johann Georg Hamann", region: "alemania", regionName: "Alemania / Prusia", subcategory: "Siglo XVIII", era: "1730 - 1788", area: "Filosofía del lenguaje y crítica a la Ilustración", concepts: "El lenguaje como madre de la razón, crítica al racionalismo abstracto", works: ["Socráticos Memorabilia", "Metacrítica sobre el purismo de la razón"], location: [54.710, 20.452], city: "Königsberg", color: "#d35400" },
            { id: "j31", name: "Max Stirner", region: "alemania", regionName: "Alemania", subcategory: "Siglo XIX", era: "1806 - 1856", area: "Individualismo anarquista", concepts: "Crítica a los 'fantasmas' (ideologías), el Único, la propiedad de sí", works: ["El único y su propiedad"], location: [49.945, 11.571], city: "Bayreuth", color: "#d35400" },
            { id: "j32", name: "Friedrich Schleiermacher", region: "alemania", regionName: "Alemania", subcategory: "Romanticismo (Siglo XIX)", era: "1768 - 1834", area: "Hermenéutica y filosofía de la religión", concepts: "Círculo hermenéutico, religión como sentimiento del Universo", works: ["Sobre la religión", "Hermenéutica"], location: [51.107, 17.038], city: "Breslau", color: "#d35400" },
            { id: "j33", name: "Günther Anders", region: "alemania", regionName: "Alemania", subcategory: "Siglo XX (Tecnología)", era: "1902 - 1992", area: "Filosofía de la tecnología y ética nuclear", concepts: "Desactualización del hombre, vergüenza prometeica, obsolescencia", works: ["La obsolescencia del hombre", "Nosotros, hijos de Eichmann"], location: [51.107, 17.038], city: "Breslau", color: "#d35400" },
            { id: "j34", name: "Helmuth Plessner", region: "alemania", regionName: "Alemania", subcategory: "Siglo XX (Antropología)", era: "1892 - 1985", area: "Antropología filosófica y filosofía de la vida", concepts: "Posición excéntrica del hombre, tener vs ser un cuerpo", works: ["Los grados de lo orgánico y el hombre", "Poder y naturaleza humana"], location: [50.082, 8.239], city: "Wiesbaden", color: "#d35400" },
            { id: "j35", name: "Bernard Bolzano", region: "austria", regionName: "Imperio Austríaco", subcategory: "Ilustración (Siglo XVIII-XIX)", era: "1781 - 1848", area: "Lógica y matemática", concepts: "Proposiciones en sí (Sätze an sich), verdad independiente de la psique", works: ["La teoría de la ciencia", "Paradojas del infinito"], location: [50.075, 14.437], city: "Praga (Bohemia)", color: "#16a085" },
            { id: "j36", name: "Franz Brentano", region: "austria", regionName: "Austria", subcategory: "Siglo XIX (Mente)", era: "1838 - 1917", area: "Psicología descriptiva y fenomenología", concepts: "Intencionalidad de la conciencia, toda conciencia es conciencia de algo", works: ["Psicología desde el punto de vista empírico"], location: [48.208, 16.373], city: "Viena", color: "#16a085" },
            { id: "j37", name: "Otto Neurath", region: "austria", regionName: "Austria", subcategory: "Siglo XX (Círculo de Viena)", era: "1882 - 1945", area: "Empirismo lógico y sociología", concepts: "Fisicalismo, unidad de la ciencia, sistema de pictogramas Isotype", works: ["Sociología empírica", "Enciclopedia y Unidad de la Ciencia"], location: [48.208, 16.373], city: "Viena", color: "#16a085" },
            { id: "j38", name: "Ernst Mach", region: "austria", regionName: "Austria / Moravia", subcategory: "Siglo XIX-XX", era: "1838 - 1916", area: "Empiriocriticismo y filosofía de la física", concepts: "Mundo como sensaciones, crítica al espacio/tiempo absoluto", works: ["El análisis de las sensaciones", "Conocimiento y error"], location: [49.195, 16.606], city: "Chirlitz (Moravia)", color: "#16a085" },
            { id: "j39", name: "Karl Popper", region: "austria", regionName: "Austria", subcategory: "Siglo XX", era: "1902 - 1994", area: "Filosofía de la ciencia y política", concepts: "Criterio de falsabilidad, racionalismo crítico, sociedad abierta", works: ["La lógica de la investigación científica", "La sociedad abierta y sus enemigos"], location: [48.2082, 16.3738], city: "Viena", color: "#16a085" },
            { id: "j40", name: "Comenio", region: "rep_checa", regionName: "Tierras Checas", subcategory: "Renacimiento", era: "1592 - 1670", area: "Filosofía de la educación y pansofismo", concepts: "Educación universal, enseñar todo a todos, armonía por el saber", works: ["Didáctica Magna", "El laberinto del mundo"], location: [48.963, 17.648], city: "Moravia", color: "#27ae60" },
            { id: "j41", name: "Jan Patočka", region: "rep_checa", regionName: "Checoslovaquia", subcategory: "Siglo XX (Fenomenología)", era: "1907 - 1977", area: "Fenomenología y filosofía de la historia", concepts: "Cuidado del alma, solidaridad de los conmovidos, Carta 77", works: ["Ensayos heréticos sobre la filosofía de la historia", "Platón y Europa"], location: [50.075, 14.437], city: "Praga", color: "#27ae60" },
            { id: "j42", name: "Andrzej Frycz Modrzewski", region: "polonia", regionName: "Polonia", subcategory: "Renacimiento (Siglo XVI)", era: "1503 - 1572", area: "Filosofía política y derecho", concepts: "Igualdad ante la ley, reforma del estado basada en el bien común", works: ["De Republica emendanda"], location: [51.503, 19.981], city: "Wolbórz", color: "#c0392b" },
            { id: "j43", name: "Roman Ingarden", region: "polonia", regionName: "Polonia", subcategory: "Siglo XX (Fenomenología)", era: "1893 - 1970", area: "Fenomenología realista y estética", concepts: "Ontología de la obra de arte estratificada, realismo fenomenológico", works: ["La obra de arte literaria", "La disputa sobre la existencia del mundo"], location: [50.064, 19.945], city: "Cracovia", color: "#c0392b" },
            { id: "j44", name: "Juri Lotman", region: "estonia", regionName: "Estonia", subcategory: "Siglo XX (Semiótica)", era: "1922 - 1993", area: "Semiótica de la cultura", concepts: "Semiosfera, sistemas culturales de modelización", works: ["La semiosfera", "La estructura del texto artístico"], location: [58.378, 26.729], city: "Tartu", color: "#2980b9" },
            { id: "j45", name: "Algirdas Julien Greimas", region: "lituania", regionName: "Lituania / Francia", subcategory: "Siglo XX (Semiótica)", era: "1917 - 1992", area: "Semiótica estructural", concepts: "Semiótica generativa, cuadrado semiótico, modelo actancial", works: ["Semántica estructural", "Del sentido"], location: [54.898, 23.903], city: "Kaunas / París", color: "#8e44ad" },
            { id: "j46", name: "Vladímir Soloviov", region: "rusia", regionName: "Rusia", subcategory: "Siglo XIX (Idealismo)", era: "1853 - 1900", area: "Filosofía religiosa y ecumenismo", concepts: "Sophia (Sabiduría Divina), Todo-unidad (vseedinstvo)", works: ["La Rusia y la Iglesia Universal", "Tres diálogos sobre la guerra"], location: [55.755, 37.617], city: "Moscú", color: "#2c3e50" },
            { id: "j47", name: "Mikhail Bakhtin", region: "rusia", regionName: "Rusia", subcategory: "Siglo XX", era: "1895 - 1975", area: "Filosofía del lenguaje y teoría literaria", concepts: "Dialogismo, polifonía, carnavalización, cronotopo", works: ["Problemas de la poética de Dostoievski", "La cultura popular en la Edad Media"], location: [52.965, 36.063], city: "Oriol", color: "#2c3e50" },
            { id: "j48", name: "Hryhorii Skovoroda", region: "ucrania", regionName: "Ucrania", subcategory: "Renacimiento Cosaco (Siglo XVIII)", era: "1722 - 1794", area: "Filosofía moral y mística cristiana", concepts: "El 'corazón' como centro espiritual, búsqueda de la afinidad", works: ["El jardín de canciones divinas", "Diálogos"], location: [50.258, 32.935], city: "Chernuhy", color: "#f1c40f" },
            { id: "j49", name: "Mijailo Hrushevski", region: "ucrania", regionName: "Ucrania", subcategory: "Nacionalismo y Filosofía del Estado", era: "1866 - 1934", area: "Filosofía de la historia e historiografía", concepts: "Continuidad Ucrania-Rus, identidad nacional diferenciada", works: ["Historia de Ucrania-Rus (10 vols.)"], location: [51.144, 23.469], city: "Chelm", color: "#f1c40f" },
            { id: "j50", name: "Lucian Blaga", region: "rumania", regionName: "Rumanía", subcategory: "Siglo XX (Ontología)", era: "1895 - 1961", area: "Filosofía de la cultura y ontología", concepts: "Inconsciente estilístico, misterios mayores, espacio miorítico", works: ["La trilogía del conocimiento", "La trilogía de la cultura"], location: [45.864, 23.553], city: "Lancrăm", color: "#e67e22" },
            { id: "j51", name: "Mircea Eliade", region: "rumania", regionName: "Rumanía", subcategory: "Siglo XX (Religión)", era: "1907 - 1986", area: "Historia de las religiones y filosofía de lo sagrado", concepts: "Hierofanía, tiempo mítico (illud tempus), sagrado vs profano", works: ["El mito del eterno retorno", "Lo sagrado y lo profano"], location: [44.426, 26.102], city: "Bucarest", color: "#e67e22" },
            { id: "j52", name: "Francysk Skaryna", region: "bielorrusia", regionName: "Bielorrusia", subcategory: "Renacimiento (Siglo XVI)", era: "c. 1490 - 1551", area: "Humanismo y filosofía del lenguaje", concepts: "Cultura vernácula, educación popular, traducción bíblica progresista", works: ["Biblia Rutena (1517-1519)"], location: [55.485, 28.768], city: "Polotsk", color: "#95a5a6" },
            { id: "j53", name: "Dimitrie Cantemir", region: "moldavia", regionName: "Moldavia", subcategory: "Ilustración (Siglo XVIII)", era: "1673 - 1723", area: "Filosofía de la historia y geopolítica", concepts: "Enciclopedismo, descripción sistemática de pueblos", works: ["Descriptio Moldaviae", "Historia del crecimiento y decadencia del Imperio Otomano"], location: [46.291, 28.058], city: "Silișteni", color: "#34495e" },
            { id: "j54", name: "Sexto Empírico", region: "grecia", regionName: "Grecia", subcategory: "Período Helenístico", era: "c. 160 - 210 d.C.", area: "Escepticismo Pirrónico", concepts: "Epoché (suspensión del juicio), ataraxia, tropologías escépticas", works: ["Esbozos Pirrónicos", "Contra los Matemáticos"], location: [31.200, 29.918], city: "Alejandría / Roma", color: "#1abc9c" },
            { id: "j55", name: "Cornelius Castoriadis", region: "grecia", regionName: "Grecia / Francia", subcategory: "Siglo XX", era: "1922 - 1997", area: "Filosofía política y ontología", concepts: "Imaginario radical, autonomía social e individual, reflexividad", works: ["La institución imaginaria de la sociedad", "Los dominios del hombre"], location: [41.008, 28.978], city: "Constantinopla / París", color: "#1abc9c" },
            { id: "j56", name: "Juan Duns Scoto", region: "islas_britanicas", regionName: "Escocia", subcategory: "Baja Edad Media / Escolástica", era: "1266 - 1308", area: "Teología y metafísica franciscana", concepts: "Haecceitas (individualidad), univocidad del ser, primacía de la voluntad", works: ["Ordinatio (Comentario a las Sentencias)", "Tratado del Primer Principio"], location: [55.777, -2.346], city: "Duns (Escocia)", color: "#3498db" },
            { id: "j57", name: "Guillermo de Ockham", region: "islas_britanicas", regionName: "Inglaterra", subcategory: "Escolástica / Nominalismo", era: "1285 - 1347", area: "Lógica y filosofía política", concepts: "Navaja de Ockham (economía ontológica), nominalismo", works: ["Summa Logicae", "Dialogus"], location: [51.304, -0.468], city: "Ockham (Surrey)", color: "#3498db" },
            { id: "j58", name: "Thomas Reid", region: "islas_britanicas", regionName: "Escocia", subcategory: "Ilustración Escocesa", era: "1710 - 1796", area: "Filosofía del sentido común", concepts: "Crítica al camino de las ideas, realismo directo", works: ["Investigación sobre la mente humana", "Ensayos sobre los poderes intelectuales"], location: [57.012, -2.553], city: "Strachan", color: "#3498db" },
            { id: "j59", name: "G. E. Moore", region: "islas_britanicas", regionName: "Inglaterra", subcategory: "Filosofía Analítica Temprana", era: "1873 - 1958", area: "Ética y epistemología", concepts: "Falacia naturalista, defensa del sentido común, 'bueno' como cualidad simple", works: ["Principia Ethica (1903)", "Una defensa del sentido común"], location: [51.507, -0.127], city: "Londres", color: "#3498db" },
            { id: "j60", name: "Axel Hägerström", region: "suecia", regionName: "Suecia", subcategory: "Realismo Jurídico (Siglo XX)", era: "1868 - 1939", area: "Filosofía del derecho y realismo axiológico", concepts: "Inexistencia objetiva de valores, crítica anti-metafísica al derecho", works: ["Sobre la verdad de las representaciones morales"], location: [57.858, 14.597], city: "Vireda / Uppsala", color: "#9b59b6" },
            { id: "j61", name: "Søren Kierkegaard", region: "dinamarca", regionName: "Dinamarca", subcategory: "Filosofía Existencial", era: "1813 - 1855", area: "Existencialismo y filosofía de la religión", concepts: "Subjetividad como verdad, estadios de la vida, angustia", works: ["Temor y Temblor", "O lo uno o lo otro", "La enfermedad mortal"], location: [55.676, 12.568], city: "Copenhague", color: "#e74c3c" },
            { id: "j62", name: "Arne Næss", region: "noruega", regionName: "Noruega", subcategory: "Ecología Profunda (Siglo XX)", era: "1912 - 2009", area: "Ecosofía y semántica empírica", concepts: "Ecología profunda vs superficial, valor inherente de la vida", works: ["Ecology, Community and Lifestyle", "Interpretation and Preciseness"], location: [59.913, 10.752], city: "Oslo", color: "#2ecc71" },
            { id: "j63", name: "Peter Wessel Zapffe", region: "noruega", regionName: "Noruega", subcategory: "Pesimismo Filosófico", era: "1899 - 1990", area: "Filosofía pesimista y biológica", concepts: "Sobrecalificación biológica, conciencia trágica, represión", works: ["Sobre lo trágico", "El último Mesías"], location: [69.649, 18.956], city: "Tromsø", color: "#2ecc71" },
            { id: "j64", name: "Panteleimon Kulish", region: "ucrania", regionName: "Ucrania", subcategory: "Nacionalismo Cultural (Siglo XIX)", era: "1819 - 1897", area: "Filosofía de la cultura e historia", concepts: "Misión histórica de la nación ucraniana, identidad lingüística", works: ["Historia de la reunificación de Rus"], location: [51.713, 33.473], city: "Voronizh", color: "#f1c40f" },
            { id: "j65", name: "Ion Heliade Rădulescu", region: "rumania", regionName: "Rumanía", subcategory: "Siglo XIX (Generación de 1848)", era: "1802 - 1872", area: "Filosofía del lenguaje y nacionalismo cultural", concepts: "Papel unificador y espiritual de la lengua rumana", works: ["Gramática rumana", "Curso de filosofía"], location: [44.925, 25.456], city: "Târgoviște", color: "#e67e22" },
            { id: "j66", name: "Titu Maiorescu", region: "rumania", regionName: "Rumanía", subcategory: "Siglo XIX-XX", era: "1840 - 1917", area: "Crítica literaria y filosofía de la cultura", concepts: "Formas sin fondo (teoría de la inautenticidad cultural)", works: ["Críticas (volúmenes varios)"], location: [44.228, 23.794], city: "Craiova", color: "#e67e22" },
            { id: "j67", name: "Kazimierz Narbutt", region: "bielorrusia", regionName: "Bielorrusia", subcategory: "Ilustración (Siglo XVIII)", era: "1738 - 1807", area: "Filosofía de la historia e ilustración", concepts: "Estudio crítico de la historia del Gran Ducado de Lituania", works: ["Historia de la nación lituana"], location: [54.016, 25.216], city: "Szawry", color: "#95a5a6" },
            { id: "j68", name: "Yanka Kupala", region: "bielorrusia", regionName: "Bielorrusia", subcategory: "Siglo XX", era: "1882 - 1942", area: "Filosofía poética y pensamiento nacional", concepts: "Reflexión sobre el destino y la libertad del pueblo bielorruso", works: ["El laúd eterno (1908)", "Hijo de la tierra (1922)"], location: [54.261, 27.185], city: "Viazynka", color: "#95a5a6" },
            { id: "j69", name: "Miron Costin", region: "moldavia", regionName: "Moldavia", subcategory: "Siglo XVII (Humanismo)", era: "1633 - 1691", area: "Filosofía de la historia y política", concepts: "Origen latino de los moldavos, destino político de principados", works: ["La crónica de la tierra de Moldavia (1677)"], location: [47.158, 27.601], city: "Moldavia", color: "#34495e" },
            { id: "j70", name: "Miguel Psellos", region: "grecia", regionName: "Bizancio", subcategory: "Siglo XI", era: "1017 - 1078", area: "Filosofía neoplatónica y enciclopedismo", concepts: "Síntesis cristianismo-neoplatonismo, estudio de Proclo", works: ["Chronographia", "De omnifaria doctrina"], location: [41.008, 28.978], city: "Constantinopla", color: "#1abc9c" },
            { id: "j71", name: "Rigas Feraios", region: "grecia", regionName: "Grecia", subcategory: "Ilustración (Siglo XVIII)", era: "1757 - 1798", area: "Filosofía política e ilustración revolucionaria", concepts: "Federación balcánica, soberanía popular, derechos humanos", works: ["Nueva Constitución Política", "Carta de los Derechos del Hombre"], location: [39.385, 22.753], city: "Velestino", color: "#1abc9c" },
            { id: "j72", name: "Roberto Grosseteste", region: "islas_britanicas", regionName: "Inglaterra", subcategory: "Baja Edad Media", era: "c. 1175 - 1253", area: "Filosofía natural y metafísica de la luz", concepts: "La luz como primera forma corpórea, método de resolución", works: ["De Luce (Sobre la Luz)", "De iride", "Hexaëmeron"], location: [52.243, 0.713], city: "Suffolk / Oxford", color: "#3498db" },
            { id: "j73", name: "Roger Bacon", region: "islas_britanicas", regionName: "Inglaterra", subcategory: "Baja Edad Media", era: "c. 1214 - 1292", area: "Empirismo temprano y filosofía natural", concepts: "Importancia de la experiencia (experientia), crítica a la autoridad", works: ["Opus Maius", "Opus Minus"], location: [50.963, -2.684], city: "Ilchester / Oxford", color: "#3498db" },
            { id: "j74", name: "Francis Hutcheson", region: "islas_britanicas", regionName: "Escocia", subcategory: "Ilustración Escocesa", era: "1694 - 1746", area: "Filosofía moral y estética", concepts: "Sentido moral innato, 'la mayor felicidad para el mayor número'", works: ["Investigación sobre el origen de nuestras ideas de belleza y virtud"], location: [54.607, -5.930], city: "Belfast / Glasgow", color: "#3498db" },
            { id: "j75", name: "William Godwin", region: "islas_britanicas", regionName: "Inglaterra", subcategory: "Ilustración / Anarquismo", era: "1756 - 1836", area: "Filosofía política anarquista", concepts: "Perfectibilismo humano, abolición de instituciones coercitivas", works: ["Investigación acerca de la justicia política (1793)"], location: [52.664, 0.160], city: "Wisbech", color: "#3498db" },
            { id: "j76", name: "R. G. Collingwood", region: "islas_britanicas", regionName: "Inglaterra", subcategory: "Idealismo Británico", era: "1889 - 1943", area: "Filosofía de la historia y metafísica", concepts: "Re-enactment (re-creación histórica), presupuestos absolutos", works: ["Idea de la historia (1946)", "Ensayo sobre la metafísica"], location: [54.283, -2.933], city: "Oxford", color: "#3498db" },
            { id: "j77", name: "Christopher Jacob Boström", region: "suecia", regionName: "Suecia", subcategory: "Idealismo (Siglo XIX)", era: "1797 - 1866", area: "Idealismo personalista y filosofía del Estado", concepts: "Personlighet como única realidad, el Estado como encarnación ética", works: ["Líneas básicas para una ética filosófica"], location: [59.858, 17.638], city: "Uppsala", color: "#9b59b6" },
            { id: "j78", name: "Knud Ejler Løgstrup", region: "dinamarca", regionName: "Dinamarca", subcategory: "Ética (Siglo XX)", era: "1905 - 1981", area: "Ética fenomenológica", concepts: "Exigencia ética silenciosa, confianza interpersonal", works: ["La exigencia ética (1956)", "Cuentas pendientes con Kierkegaard"], location: [56.157, 10.210], city: "Aarhus", color: "#e74c3c" },
            { id: "j79", name: "J. V. Snellman", region: "finlandia", regionName: "Finlandia", subcategory: "Idealismo Hegeliano", era: "1806 - 1881", area: "Filosofía del Estado y nacionalismo", concepts: "Conciencia cultural nacional, el Estado como realización ética", works: ["Doctrina del Estado (1842)", "Desarrollo de la idea de personalidad"], location: [60.169, 24.935], city: "Helsinki", color: "#1abc9c" },
            { id: "j80", name: "Eino Kaila", region: "finlandia", regionName: "Finlandia", subcategory: "Neopositivismo", era: "1890 - 1958", area: "Psicología filosófica y teoría de la ciencia", concepts: "Síntesis empirismo lógico y Gestalt, análisis de realidad", works: ["Personalidad (1934)", "Conocimiento humano (1939)"], location: [63.001, 23.791], city: "Alajärvi", color: "#1abc9c" },
            { id: "j81", name: "Georg Henrik von Wright", region: "finlandia", regionName: "Finlandia", subcategory: "Lógica Filosófica", era: "1916 - 2003", area: "Lógica deóntica y filosofía de la acción", concepts: "Lógica de normas, crítica a la tecnología deshumanizada", works: ["Essay in Deontic Logic", "Varieties of Goodness", "Mito del progreso"], location: [60.169, 24.935], city: "Helsinki", color: "#1abc9c" },
            { id: "j82", name: "Jaakko Hintikka", region: "finlandia", regionName: "Finlandia", subcategory: "Lógica y Lenguaje", era: "1929 - 2015", area: "Lógica epistémica y semántica de mundos posibles", concepts: "Semántica de juegos, lógica del conocimiento y creencia", works: ["Knowledge and Belief (1962)", "Models for Modalities"], location: [60.169, 24.935], city: "Helsinki / Stanford", color: "#1abc9c" },
            { id: "j83", name: "Páll Skúlason", region: "islandia", regionName: "Islandia", subcategory: "Filosofía de la Tecnología", era: "1945 - 2015", area: "Ética y antropología filosófica", concepts: "Autocomprensión humana por tecnología, responsabilidad y dignidad", works: ["Sobre la tecnología", "Amor y placer"], location: [64.126, -21.817], city: "Reikiavik", color: "#8e44ad" },
            { id: "j84", name: "Vilhjálmur Árnason", region: "islandia", regionName: "Islandia", subcategory: "Bioética", era: "1953 - ", area: "Ética aplicada y bioética", concepts: "Fundamentos éticos de la biotecnología, marcos regulatorios médicos", works: ["Ética y responsabilidad colectiva (1995)"], location: [64.963, -19.020], city: "Reikiavik", color: "#8e44ad" },
            { id: "j85", name: "Jón Ólafsson", region: "islandia", regionName: "Islandia", subcategory: "Filosofía Política", era: "1964 - ", area: "Teoría de la democracia y estudios de medios", concepts: "Esfera pública digital, desinformación, democracia deliberativa", works: ["¿Gente independiente en red? (2005)"], location: [64.126, -21.817], city: "Reikiavik", color: "#8e44ad" },
            { id: "j86", name: "Simón Rodríguez", region: "venezuela", regionName: "Venezuela", subcategory: "Siglo XIX - Independencia", era: "1769-1854", area: "Teoría de la educación y filosofía política", concepts: "Inventamos o erramos, educación para la Independencia, republicanismo", works: ["Sociedades Americanas (1828)"], location: [10.5, -66.933], city: "Caracas", color: "#e74c3c" }
        ];

        // Lógica de Mapa y Filtrado
        const map = L.map('map', {
           center: [25, -30],
           zoom: 2,
           minZoom: 2,
           maxBounds: [[-60, -120], [80, 60]] // Incluye América y Europa
        });
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        const layers = {};
        const stats = { all: 0 };
        const regionMeta = {};

        // Inicializar datos
        rawData.forEach(p => {
            if (!layers[p.region]) {
                layers[p.region] = L.layerGroup().addTo(map);
                stats[p.region] = 0;
                regionMeta[p.region] = { name: p.regionName, color: p.color };
            }
            stats.all++;
            stats[p.region]++;

            const marker = L.circleMarker(p.location, {
                radius: 8,
                fillColor: p.color,
                color: "#fff",
                weight: 2,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(layers[p.region]);

            marker.bindPopup(`<b>${p.name}</b><br>${p.city}`);
            marker.on('click', () => updateDetails(p));
        });

        // Crear Interfaz
        document.getElementById('total-count').innerText = stats.all;
        document.getElementById('cnt-all').innerText = stats.all;

        const filterBar = document.getElementById('filter-bar');
        const legendBox = document.getElementById('legend-box');

        Object.keys(regionMeta).sort().forEach(regId => {
            // Botones de filtro
            const btn = document.createElement('button');
            btn.className = 'region-btn';
            btn.innerHTML = `${regionMeta[regId].name} <span class="counter">${stats[regId]}</span>`;
            btn.onclick = (e) => filterData(regId, e.target);
            filterBar.appendChild(btn);

            // Leyenda
            const item = document.createElement('div');
            item.className = 'legend-item';
            item.innerHTML = `<div class="color-box" style="background:${regionMeta[regId].color}"></div>${regionMeta[regId].name}`;
            legendBox.appendChild(item);
        });

        function updateDetails(p) {
            const panel = document.getElementById('details-panel');
            panel.innerHTML = `
                <div class="philosopher-info active">
                    <div class="philosopher-header">
                        <h2 class="philosopher-name">${p.name}</h2>
                        <p class="philosopher-era">${p.era}</p>
                        <span class="tag">${p.subcategory}</span>
                        <span class="tag" style="background:#34495e">${p.regionName}</span>
                    </div>
                    
                    <div class="info-section">
                        <h3 class="info-title">Área de Pensamiento</h3>
                        <p>${p.area}</p>
                    </div>

                    <div class="info-section">
                        <h3 class="info-title">Conceptos Fundamentales</h3>
                        <p>${p.concepts}</p>
                    </div>

                    <div class="info-section">
                        <h3 class="info-title">Obras Principales</h3>
                        <ul class="works-list">
                            ${p.works.map(w => `<li>${w}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3 class="info-title">Contexto Geográfico</h3>
                        <p><i class="fas fa-map-pin"></i> ${p.city}</p>
                    </div>
                </div>
            `;
            map.flyTo(p.location, 6);
        }

        function filterData(region, btn) {
            document.querySelectorAll('.region-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');

            Object.keys(layers).forEach(id => {
                if(region === 'all' || id === region) map.addLayer(layers[id]);
                else map.removeLayer(layers[id]);
            });
            if(region === 'all') map.setView([52, 10], 4);
        }

        // Buscador Íntegro
        document.getElementById('search').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const found = rawData.find(p => 
                p.name.toLowerCase().includes(term) || 
                p.concepts.toLowerCase().includes(term) ||
                p.area.toLowerCase().includes(term)
            );
            if(found) updateDetails(found);
        });
    </script>
</body>

</html>

